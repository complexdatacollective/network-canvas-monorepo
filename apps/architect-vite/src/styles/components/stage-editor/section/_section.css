.stage-editor-section {
	/* Surface level system with automatic nesting */
	--current-surface: var(--color-surface-1);
	--current-surface-foreground: var(--color-surface-1-foreground);
	--next-surface: var(--color-surface-1);
	--next-surface-foreground: var(--color-surface-1-foreground);

	margin: var(--space-10) var(--space-20);
	padding: var(--space-5) var(--space-10);
	background-color: var(--current-surface);
	color: var(--current-surface-foreground);
	border-radius: var(--border-radius);
	position: relative;
	box-shadow: 0 var(--space-px) var(--space-px) 0 var(--color-shadow-panel);

	&.stage-editor-section--toggleable {
		&:not(.stage-editor-section--open) {
			.summary {
				margin-top: calc(-1 * var(--space-5));
			}
		}
	}

	.form-field-container {
		margin-bottom: 0;
	}

	> legend {
		--input-background: transparent;

		background-color: var(--current-surface);
		color: var(--current-surface-foreground);
		font-family: var(--heading-font-family);
		font-size: var(--text-base);
		padding: var(--space-2) var(--space-7);
		border-radius: var(--border-radius);
		display: flex;
		align-items: center;
		justify-content: center;

		.form-field-container {
			transform: scale(0.7);
		}

		.form-field {
			padding: 0;
			margin: 0;
			min-height: auto;
		}

		.icon {
			height: var(--space-2);
			width: var(--space-2);
			margin-right: var(--space-2);

			.cls-2 {
				fill: hsl(var(--charcoal));
			}
		}
	}

	&.stage-editor-section--disabled {
		opacity: 0.5;
		cursor: not-allowed;

		> * {
			pointer-events: none;
		}
	}

	/* Automatic surface level progression for nested sections */
	.stage-editor-section {
		--current-surface: var(--next-surface);
		--current-surface-foreground: var(--next-surface-foreground);
		--next-surface: var(--color-surface-2);
		--next-surface-foreground: var(--color-surface-2-foreground);
		--input-background: var(--color-surface-1);
		--slider-color: hsl(var(--charcoal));

		margin: var(--space-10) 0;

		.form-field-slider {
			--slider-color: hsl(var(--charcoal));
		}
	}

	> .stage-editor-section {
		border-radius: var(--space-2);
	}

	&.stage-editor-section--compact-next {
		margin-bottom: -2.5rem;
		padding-bottom: 0;
	}
}
